<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>前端监控SDK</title>
    <style>
        .content {
            width: 300px;
            word-wrap: break-word;
        }
    </style>
</head>

<body></body>
<div id="container">
    <input id="errorBtn" type="button" value="点击报错" onClick="errorClick()">
    <input id="promiseBtn" type="button" value="点击报错" onClick="promiseErrorClick()">
    <input id="successAjax" type="button" value="ajax成功请求" onclick="sendSuccess()">
    <input id="errorAjax" type="button" value="ajax失败请求" onClick="sendError()">
    <!-- <div class="content"></div> -->
</div>
</body>

<script>
    // 测试白屏
    // let content = document.getElementsByClassName('content')[0]
    // content.innerHTML = '<span>@</span>'.repeat(10000)


    function errorClick() {
        window.varError.error = 'error'
    }
    function promiseErrorClick() {
        new Promise((resolve, reject) => {
            window.varError.error = 'error'
        }).then(res => { })
    }
    function sendSuccess() {
        let xhr = new XMLHttpRequest()
        xhr.open('GET', '/success', true)
        xhr.responseType = 'json'
        xhr.onload = function () {
            console.log(xhr.response)
        }
        xhr.onerror = function (error) {
            console.log(error)
        }
        xhr.send()
    }
    function sendError() {
        let xhr = new XMLHttpRequest()
        xhr.open('POST', '/error', true)
        xhr.responseType = 'json'
        xhr.onload = function () {
            console.log(xhr.response)
        }
        xhr.onerror = function (error) {
            console.log(error)
        }
        xhr.send("name=jack")
    }
</script>
<!-- <script src="someError.js"></script> -->

</html>